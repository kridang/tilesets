
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Parks in SLU-Queen Anne</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://api.mapbox.com/mapbox-gl-js/v2.8.1/mapbox-gl.css" rel="stylesheet">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.18.1/mapbox-gl.js"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #map {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%;
        }

        #menu {
            background: #fff;
            position: absolute;
            z-index: 1;
            top: 10px;
            right: 10px;
            border-radius: 3px;
            width: 120px;
            border: 1px solid rgba(0, 0, 0, 0.4);
            font-family: 'Open Sans', sans-serif;
        }

        #menu a {
            font-size: 13px;
            color: #404040;
            display: block;
            margin: 0;
            padding: 0;
            padding: 10px;
            text-decoration: none;
            border-bottom: 1px solid rgba(0, 0, 0, 0.25);
            text-align: center;
        }

        #menu a:last-child {
            border: none;
        }

        #menu a:hover {
            background-color: #f8f8f8;
            color: #404040;
        }

        #menu a.active {
            background-color: #3887be;
            color: #ffffff;
        }

        #menu a.active:hover {
            background: #3074a4;
        }

        #map-overlay {
            position: absolute;
            top: 10px;
            left: 10px;
            z-index: 2;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 14px;
            border-radius: 4px;
            max-width: 300px;
        }

        #map-overlay h1 {
            font-size: 16px;
            margin: 0 0 6px 0;
        }

        #map-overlay p {
            font-size: 12px;
            margin: 0;
        }
    </style>
</head>
    <body>
        <div id="map-overlay">
            <h1>Parks and Public Life in SLU-Queen Anne</h1>
            <p>
                This map visualizes parks and recreational spaces
                in the South Lake Unionâ€“Queen Anne area. The themed layer highlights green spaces
                and outdoor activity areas within the neighborhood.
            </p>
        </div>
        <div id="map"></div>
        <div id="menu"></div>
    <script>
        mapboxgl.accessToken = 'pk.eyJ1Ijoia3JpZGFuZyIsImEiOiJjbWhib3YwM3cxYmM0Mmxwdm00MmpubjdnIn0.A_2GT3PB5OEdbL9HLwlubQ';
        const map = new mapboxgl.Map({
            container: 'map',
            style: 'mapbox://styles/mapbox/light-v11',
            zoom: 12,
            center: [-122.335167, 47.6169] // SLU/QA
        });

        map.on('load', () => {
            // First tileset: SLU-Queen Anne
            map.addSource('tileset-1', {
                type: 'raster',
                tiles: [
                    'assets/tileset_1/slu-queenanne/{z}/{x}/{y}.png'
                ],
                tileSize: 256,
                attribution: 'Map tiles designed by Kristy Dang'
            });

            map.addLayer({
                id: 'tileset-1-layer',
                type: 'raster',
                source: 'tileset-1',
                layout: {
                    'visibility': 'none'
                }
            });

            // Second tileset: Parks SLU/QA
            map.addSource('tileset-2', {
                type: 'raster',
                tiles: [
                    'assets/tileset_2/parks-slu-queenanne/{z}/{x}/{y}.png'
                ],
                tileSize: 256,
                attribution: 'Map tiles designed by Kristy Dang'
            });

            map.addLayer({
                id: 'tileset-2-layer',
                type: 'raster',
                source: 'tileset-2',
                layout: {
                    'visibility': 'none'
                }
            });

            // Third tileset: SLU & Parks
            map.addSource('tileset-3', {
                type: 'raster',
                tiles: [
                    'assets/tileset_3/slu-parks-mix/{z}/{x}/{y}.png'
                ],
                tileSize: 256,
                attribution: 'Map tiles designed by Kristy Dang'
            });

            map.addLayer({
                id: 'tileset-3-layer',
                type: 'raster',
                source: 'tileset-3',
                layout: {
                    'visibility': 'none'
                }
            });

            // Fourth tileset: Theme
            map.addSource('tileset-4', {
                type: 'raster',
                tiles: [
                    'assets/tileset_4/slu-park-theme/{z}/{x}/{y}.png'
                ],
                tileSize: 256,
                attribution: 'Map tiles designed by Kristy Dang'
            });

            map.addLayer({
                id: 'tileset-4-layer',
                type: 'raster',
                source: 'tileset-4',
                layout: {
                    'visibility': 'none'
                }
            });

            // Layer switcher code
            map.on('idle', () => {
            const toggleableLayerIds = [
                'tileset-1-layer',
                'tileset-2-layer',
                'tileset-3-layer',
                'tileset-4-layer'
            ];

            for (const id of toggleableLayerIds) {
                if (document.getElementById(id)) continue;

                const link = document.createElement('a');
                link.id = id;
                link.href = '#';

                if (id === 'tileset-1-layer') link.textContent = 'Basemap';
                if (id === 'tileset-2-layer') link.textContent = 'Parks';
                if (id === 'tileset-3-layer') link.textContent = 'Basemap + Parks';
                if (id === 'tileset-4-layer') link.textContent = 'Themed Parks';

                link.className = 'inactive';

                link.onclick = function (e) {
                    e.preventDefault();
                    e.stopPropagation();

                    const visibility = map.getLayoutProperty(id, 'visibility');

                    if (visibility === 'visible' || visibility === undefined) {
                        map.setLayoutProperty(id, 'visibility', 'none');
                        this.className = '';
                    } else {
                        map.setLayoutProperty(id, 'visibility', 'visible');
                        this.className = 'active';
                    }
                };

                document.getElementById('menu').appendChild(link);
            }
            });

        });
    </script>

    </body>
</html>
